<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2022, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Timings (How Fast Is It?) &mdash; Python and R Package genieclust</title>
  

  
  
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  
  

  
    <link rel="canonical" href="https://genieclust.gagolewski.com/weave/timings.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Clustering with Noise Points Detection" href="noise.html" />
    <link rel="prev" title="Benchmarks (How Good Is It?)" href="benchmarks_ar.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> genieclust
          

          
          </a>

          <div class="version">
              Python and R Package<br />    v1.1.0
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">genieclust</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/genieclust">Source Code (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/genieclust/issues">Bug Tracker and Feature Suggestions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/genieclust/">PyPI Entry</a></li>
<li class="toctree-l1"><a class="reference external" href="https://CRAN.R-project.org/package=genieclust">CRAN Entry</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sklearn_toy_example.html">Comparing Algorithms on Toy Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks_ar.html">Benchmarks (How Good Is It?)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Timings (How Fast Is It?)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#large-datasets">Large Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timings-as-a-function-of-n-and-d">Timings as a Function of <cite>n</cite> and <cite>d</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#timings-as-a-function-of-the-number-of-threads">Timings as a Function of the Number of Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Clustering with Noise Points Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Example: Sparse Data and Movie Recommendation</a></li>
<li class="toctree-l1"><a class="reference internal" href="string.html">Example: String Data and Grouping of DNA</a></li>
<li class="toctree-l1"><a class="reference internal" href="r.html">R Interface Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genieclust.html">Python Package <cite>genieclust</cite> Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rapi.html">R Package <em>genieclust</em> Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">See Also</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://clustering-benchmarks.gagolewski.com">Clustering Benchmarks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com/">Data Wrangling in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">What Is New in <em>genieclust</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks_details.html">Benchmarks — Detailed Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks_approx.html">Benchmarks — Approximate Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../z_bibliography.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">genieclust</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Timings (How Fast Is It?)</li>
    
    
      <li class="wy-breadcrumbs-aside">

        
        
        <a class="github-button" href="https://github.com/gagolews/genieclust" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star gagolews/genieclust on GitHub">GitHub</a>
        


        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="noise.html" class="btn btn-neutral float-right" title="Clustering with Noise Points Detection" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="benchmarks_ar.html" class="btn btn-neutral float-left" title="Benchmarks (How Good Is It?)" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="timings-how-fast-is-it">
<h1>Timings (How Fast Is It?)<a class="headerlink" href="#timings-how-fast-is-it" title="Permalink to this heading"></a></h1>
<p>In the <a class="reference internal" href="benchmarks_ar.html"><span class="doc">previous section</span></a> we have demonstrated
that Genie generates partitions of high <em>quality</em>. Now the crucial question is:
does it do this quickly?</p>
<p>Genie will be compared against K-means from <a class="reference external" href="https://scikit-learn.org/">scikit-learn</a>
<span id="id1">[<a class="reference internal" href="../z_bibliography.html#id32" title="F. Pedregosa and others. Scikit-learn: Machine learning in Python. Journal of Machine Learning Research, 12(85):2825–2830, 2011. URL: http://jmlr.org/papers/v12/pedregosa11a.html.">P+11</a>]</span> version 0.23.1
(<cite>sklearn.cluster.KMeans</cite>) for different number of threads
(by default it uses all available resources;
note that the number of restarts, <cite>n_init</cite>, defaults to 10)
and hierarchical agglomerative algorithms
with the centroid, median, and Ward linkage implemented in the
<a class="reference external" href="http://www.danifold.net/fastcluster.html">fastcluster</a> package
<span id="id2">[<a class="reference internal" href="../z_bibliography.html#id17" title="D. Müllner. fastcluster: Fast hierarchical, agglomerative clustering routines for R and Python. Journal of Statistical Software, 53(9):1–18, 2013. doi:10.18637/jss.v053.i09.">Mul13</a>]</span>.</p>
<p>Genie, just like the single linkage, is based on a minimum spanning tree (MST) of the
pairwise distance graph of an input point set.
Given the MST (the slow part), Genie itself has <span class="math notranslate nohighlight">\(O(n \sqrt{n})\)</span> time
and <span class="math notranslate nohighlight">\(O(n)\)</span> memory complexity.
Generally, our parallelised implementation of a Jarník (Prim/Dijkstra)-like
method  <span id="id3">[<a class="reference internal" href="../z_bibliography.html#id15" title="C.F. Olson. Parallel algorithms for hierarchical clustering. Parallel Computing, 21:1313–1325, 1995. doi:10.1016/0167-8191(95)00017-I.">Ols95</a>]</span> will be called to compute an MST, which takes <span class="math notranslate nohighlight">\(O(d n^2)\)</span> time.
However, <a class="reference external" href="https://www.mlpack.org/">mlpack.emst</a> <span id="id4">[<a class="reference internal" href="../z_bibliography.html#id20" title="R.R. Curtin, M. Edel, M. Lozhnikov, Y. Mentekidis, S. Ghaisas, and S. Zhang. Mlpack 3: A fast, flexible machine learning library. Journal of Open Source Software, 3(26):726, 2018. doi:10.21105/joss.00726.">CEL+18</a>]</span> provides a very fast
alternative in the case of Euclidean spaces of (very) low dimensionality,
see <span id="id5">[<a class="reference internal" href="../z_bibliography.html#id21" title="W.B. March, P. Ram, and A.G. Gray. Fast Euclidean minimum spanning tree: Algorithm, analysis, and applications. In Proc. 16th ACM SIGKDD'10, 603–612. 2010. doi:10.1145/1835804.1835882.">MRG10</a>]</span> and the <cite>mlpack_enabled</cite> parameter, which is automatically used
for datasets with up to <span class="math notranslate nohighlight">\(d=6\)</span> features.
Moreover, in the approximate method (<cite>exact</cite> = <code class="docutils literal notranslate"><span class="pre">False</span></code>), we apply
the Kruskal algorithm on the near-neighbour graph determined
by <cite>nmslib</cite> <span id="id6">[<a class="reference internal" href="../z_bibliography.html#id22" title="B. Naidan, L. Boytsov, Y. Malkov, and D. Novak. Non-metric space library (NMSLIB) manual, version 2.0. 2019. URL: https://github.com/nmslib/nmslib/blob/master/manual/latex/manual.pdf.">NBMN19</a>]</span>. Albeit this only gives <em>some</em> sort of a spanning <em>forest</em>,
such a data structure <a class="reference internal" href="benchmarks_approx.html"><span class="doc">turns out to be very suitable for our clustering task</span></a>.</p>
<p>All timings will be performed on a PC running GNU/Linux 5.4.0-40-generic #44-Ubuntu
SMP x86_64 kernel with an Intel(R) Core(TM) i7-9750H CPU &#64; 2.60GHz (12M cache, 6 cores, 12 threads)
and total memory of 16,242,084 kB.</p>
<section id="large-datasets">
<h2>Large Datasets<a class="headerlink" href="#large-datasets" title="Permalink to this heading"></a></h2>
<p>Let’s study the algorithm’s run times for some of the
“larger” datasets (70,000-105,600 observations,
see section on <a class="reference internal" href="benchmarks_ar.html"><span class="doc">benchmark results</span></a> for discussion)
from the
<a class="reference external" href="https://github.com/gagolews/clustering-benchmarks">Benchmark Suite for Clustering Algorithms — Version 1</a>
<span id="id7">[<a class="reference internal" href="../z_bibliography.html#id30" title="M. Gagolewski and others. Benchmark suite for clustering algorithms – version 1. 2020. URL: https://github.com/gagolews/clustering-benchmarks, doi:10.5281/zenodo.3815066.">G+20</a>]</span>.
Features with variance of 0 were removed,
datasets were centred at <strong>0</strong> and scaled so that they have total variance of 1.
Tiny bit of Gaussian noise was added to each observation.
Clustering is performed with respect to the Euclidean distance.</p>
<p>Here are the results (in seconds) if 6 threads are requested
(except for <cite>fastcluster</cite> which is not parallelised).
For K-means, the timings are listed as a function of the number of clusters to detect,
for the other hierarchical methods the run-times are almost identical irrespective of the
partitions’ cardinality.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 32%" />
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>dataset</p></th>
<th class="head"><p>n</p></th>
<th class="head"><p>d</p></th>
<th class="head"><p>method</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>100</p></th>
<th class="head"><p>1000</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mnist/digits</p></td>
<td><p>70000</p></td>
<td><p>719</p></td>
<td><p>Genie_0.3</p></td>
<td><p>412.72</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Genie_0.3_approx</p></td>
<td><p>42.77</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_centroid</p></td>
<td><p>4170.98</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_median</p></td>
<td><p>3927.93</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_ward</p></td>
<td><p>4114.05</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>sklearn_kmeans</p></td>
<td><p>26.3</p></td>
<td><p>217.62</p></td>
<td><p>1691.68</p></td>
</tr>
<tr class="row-even"><td><p>mnist/fashion</p></td>
<td><p>70000</p></td>
<td><p>784</p></td>
<td><p>Genie_0.3</p></td>
<td><p>445.81</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Genie_0.3_approx</p></td>
<td><p>38.02</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_centroid</p></td>
<td><p>4486.32</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_median</p></td>
<td><p>4384.62</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_ward</p></td>
<td><p>4757.32</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>sklearn_kmeans</p></td>
<td><p>24.9</p></td>
<td><p>225.04</p></td>
<td><p>1745.88</p></td>
</tr>
<tr class="row-even"><td><p>sipu/worms_2</p></td>
<td><p>105600</p></td>
<td><p>2</p></td>
<td><p>Genie_0.3</p></td>
<td><p>0.57</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Genie_0.3_approx</p></td>
<td><p>3.67</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_centroid</p></td>
<td><p>66.3</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_median</p></td>
<td><p>64.11</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_ward</p></td>
<td><p>60.92</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>sklearn_kmeans</p></td>
<td><p>0.86</p></td>
<td><p>10.96</p></td>
<td><p>111.9</p></td>
</tr>
<tr class="row-even"><td><p>sipu/worms_64</p></td>
<td><p>105000</p></td>
<td><p>64</p></td>
<td><p>Genie_0.3</p></td>
<td><p>76.7</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Genie_0.3_approx</p></td>
<td><p>8.26</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_centroid</p></td>
<td><p>4945.91</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_median</p></td>
<td><p>2854.27</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>fastcluster_ward</p></td>
<td><p>778.18</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>sklearn_kmeans</p></td>
<td><p>3.35</p></td>
<td><p>37.89</p></td>
<td><p>357.84</p></td>
</tr>
</tbody>
</table>
<p>Of course, the K-means algorithm is the fastest.
However, its performance degrades as K increases. Hence, it might not be
a good choice for the so-called <em>extreme clustering</em> (compare <span id="id8">[<a class="reference internal" href="../z_bibliography.html#id26" title="A. Kobren, N. Monath, A. Krishnamurthy, and A. McCallum. A hierarchical algorithm for extreme clustering. In Proc. 23rd ACM SIGKDD'17, 255–264. 2017. doi:10.1145/3097983.3098079.">KMKM17</a>]</span>)
problems. Most importantly, the approximate version of Genie (based on <cite>nmslib</cite>)
is only slightly slower.
The exact variant is extremely performant in Euclidean spaces of low dimensionality
(thanks to <cite>mlpack</cite>) and overall at least 10 times more efficient than the other
hierarchical algorithms in this study.</p>
</section>
<section id="timings-as-a-function-of-n-and-d">
<h2>Timings as a Function of <cite>n</cite> and <cite>d</cite><a class="headerlink" href="#timings-as-a-function-of-n-and-d" title="Permalink to this heading"></a></h2>
<p>In order to study the run-times as a function dataset size and dimensionality,
let’s consider a series of synthetic benchmarks, each with two Gaussian blobs of size <cite>n/2</cite>
(with i.i.d. coordinates), in a <cite>d</cite>-dimensional space.</p>
<p>Here are the medians of 3-10 timings (depending on the dataset size), in seconds,
on 6 threads:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 5%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>method</p></th>
<th class="head"><p>d</p></th>
<th class="head"><p>10000</p></th>
<th class="head"><p>50000</p></th>
<th class="head"><p>100000</p></th>
<th class="head"><p>500000</p></th>
<th class="head"><p>1000000</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Genie_0.3_approx</p></td>
<td><p>2</p></td>
<td><p>0.17</p></td>
<td><p>0.98</p></td>
<td><p>2.12</p></td>
<td><p>14.93</p></td>
<td><p>33.79</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>5</p></td>
<td><p>0.2</p></td>
<td><p>1.3</p></td>
<td><p>2.87</p></td>
<td><p>22.75</p></td>
<td><p>54.66</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>10</p></td>
<td><p>0.25</p></td>
<td><p>1.69</p></td>
<td><p>3.84</p></td>
<td><p>36.18</p></td>
<td><p>92.03</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>25</p></td>
<td><p>0.29</p></td>
<td><p>1.95</p></td>
<td><p>5.46</p></td>
<td><p>62.25</p></td>
<td><p>158.27</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>50</p></td>
<td><p>0.36</p></td>
<td><p>3.15</p></td>
<td><p>8.15</p></td>
<td><p>81.95</p></td>
<td><p>202.08</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>100</p></td>
<td><p>0.48</p></td>
<td><p>4.6</p></td>
<td><p>12.6</p></td>
<td><p>113.37</p></td>
<td><p>266.64</p></td>
</tr>
<tr class="row-even"><td><p>Genie_0.3_mlpack</p></td>
<td><p>2</p></td>
<td><p>0.04</p></td>
<td><p>0.26</p></td>
<td><p>0.55</p></td>
<td><p>3.03</p></td>
<td><p>6.58</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>5</p></td>
<td><p>0.28</p></td>
<td><p>1.96</p></td>
<td><p>4.46</p></td>
<td><p>28.4</p></td>
<td><p>62.75</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>10</p></td>
<td><p>3.08</p></td>
<td><p>35.54</p></td>
<td><p>92.87</p></td>
<td><p>794.71</p></td>
<td><p>2014.59</p></td>
</tr>
<tr class="row-odd"><td><p>Genie_0.3_nomlpack</p></td>
<td><p>2</p></td>
<td><p>0.16</p></td>
<td><p>2.52</p></td>
<td><p>9.87</p></td>
<td><p>267.76</p></td>
<td><p>1657.86</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>5</p></td>
<td><p>0.14</p></td>
<td><p>2.62</p></td>
<td><p>11.4</p></td>
<td><p>421.46</p></td>
<td><p>2997.11</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>10</p></td>
<td><p>0.15</p></td>
<td><p>3.21</p></td>
<td><p>12.74</p></td>
<td><p>719.33</p></td>
<td><p>4388.26</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>25</p></td>
<td><p>0.28</p></td>
<td><p>6.51</p></td>
<td><p>26.65</p></td>
<td><p>1627.9</p></td>
<td><p>7708.23</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>50</p></td>
<td><p>0.47</p></td>
<td><p>11.97</p></td>
<td><p>54.52</p></td>
<td><p>2175.3</p></td>
<td><p>11346.3</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>100</p></td>
<td><p>1</p></td>
<td><p>26.07</p></td>
<td><p>132.47</p></td>
<td><p>4408.07</p></td>
<td><p>16021.8</p></td>
</tr>
</tbody>
</table>
<p>By default, <cite>mlpack_enabled</cite> is <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>, which translates
to <code class="docutils literal notranslate"><span class="pre">True</span></code> if the requested metric is Euclidean,  Python package <cite>mlpack</cite> is available,
and <cite>d</cite> is not greater than 6.
The effect of the curse of dimensionality is clearly visible – clustering
in very low-dimensional Euclidean spaces is extremely fast.
On the other hand, the approximate version of Genie can easily cluster
very large datasets. Only the system’s memory limits might become a problem then.</p>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../_images/timings_g2mg-plot_1.png"><img alt="../_images/timings_g2mg-plot_1.png" src="../_images/timings_g2mg-plot_1.png" style="width: 15cm;" /></a>
<figcaption>
<p><span class="caption-number">Figure 12 </span><span class="caption-text">Timings [s] as a function of the dataset size and dimensionality — problem sizes that can be solved in a few minutes.</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="timings-as-a-function-of-the-number-of-threads">
<h2>Timings as a Function of the Number of Threads<a class="headerlink" href="#timings-as-a-function-of-the-number-of-threads" title="Permalink to this heading"></a></h2>
<p>Recall that the timings are done on a PC with 6 physical cores.
Genie turns out to be nicely parallelisable — as evidenced on
the <code class="docutils literal notranslate"><span class="pre">mnist/digits</span></code> dataset:</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../_images/timings_digits_1.png"><img alt="../_images/timings_digits_1.png" src="../_images/timings_digits_1.png" style="width: 15cm;" /></a>
<figcaption>
<p><span class="caption-number">Figure 13 </span><span class="caption-text">Timings [s] as a function of the number of clusters and threads.</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<p>The approximate (<cite>exact</cite> = <code class="docutils literal notranslate"><span class="pre">False</span></code>) version of Genie is much faster
than the original one. At the same time, it is still
<a class="reference internal" href="benchmarks_approx.html"><span class="doc">highly compatible</span></a> with it
(at least at higher levels of the cluster hierarchy). Therefore, we
can safely recommend its use in large problem instances.
Most importantly, its performance is not much worse than the K-means method
with small K. Once a complete cluster hierarchy is determined,
partitioning of any cardinality can be extracted in less than 0.34 s on a 1M dataset.
Still, even the exact Genie is amongst the fastest clustering algorithms in the pool.</p>
<p>On top of that, we are also allowed to change our mind about the <cite>gini_threshold</cite>
parameter once the clustering is has been determined. The MST is stored for further
reference and is not recomputed unless needed. Here are the timings for
a first run of the algorithm:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">genieclust</span><span class="o">,</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;worms_2.data.gz&quot;</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">genieclust</span><span class="o">.</span><span class="n">Genie</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">gini_threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">g</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;time elapsed - first run: </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## time elapsed - first run: 7.911</span>
</pre></div>
</div>
<p>Changing some parameters and re-running the cluster search:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="n">gini_threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">g</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;time elapsed - consecutive run: </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## time elapsed - consecutive run: 0.028</span>
</pre></div>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="noise.html" class="btn btn-neutral float-right" title="Clustering with Noise Points Detection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="benchmarks_ar.html" class="btn btn-neutral float-left" title="Benchmarks (How Good Is It?)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright &#169; 2018–2022 by <a href="https://www.gagolewski.com">Marek Gagolewski</a>. Some rights reserved. Licensed under <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/'>CC BY-NC-ND 4.0</a>.

    Built with <a href="https://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a>
    theme.
      <span class="lastupdated">
        Last updated on 2022-09-12T12:14:43+1000.
      </span>


    This site will never display any ads: it is a non-profit project.
    It does not collect any data.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>